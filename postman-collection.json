{
  "info": {
    "name": "National Health Record System API",
    "description": "Patient-centric EHR platform for patients, doctors, and government hospitals with consent control, secure document storage, offline sync, and audit logging.\n\n## üöÄ Quick Start\n\n### 1. Setup Database (First Time Only)\n```bash\nnpm run seed\n```\n\n### 2. Login to Get Authorization Token\nUse the **\"Login (Default Admin) ‚≠ê\"** request in the Auth folder with these credentials:\n- **Email:** admin@national-health-record-system.com\n- **Password:** Admin@123456\n- **Role:** Patient\n\n### 3. Token is Auto-Saved!\nThe access token is automatically saved to the `{{accessToken}}` variable and used for all authenticated requests.\n\n## üìã API Endpoint Structure\n- **Auth endpoints:** `/api/auth/*` (no version)\n- **All other endpoints:** `/api/v1/*` (versioned)\n\n## üîê Valid Role Values\n- `Patient` - for patient users\n- `Doctor` - for doctor users\n- `HospitalAdmin` - for hospital administrators\n- `SuperAdmin` - for super administrators",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "version": "1.0.0"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{accessToken}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:3000/api",
      "type": "string",
      "description": "Base API URL (auth endpoints have no version)"
    },
    {
      "key": "baseUrlV1",
      "value": "http://localhost:3000/api/v1",
      "type": "string",
      "description": "Base API URL for versioned endpoints"
    },
    {
      "key": "accessToken",
      "value": "",
      "type": "string"
    },
    {
      "key": "refreshToken",
      "value": "",
      "type": "string"
    },
    {
      "key": "patientId",
      "value": "",
      "type": "string"
    },
    {
      "key": "hospitalId",
      "value": "",
      "type": "string"
    },
    {
      "key": "doctorId",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Health Check",
      "request": {
        "auth": {
          "type": "noauth"
        },
        "method": "GET",
        "url": "http://localhost:3000/health",
        "description": "Check API health status"
      }
    },
    {
      "name": "Auth",
      "item": [
        {
          "name": "Register Patient",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.accessToken) {",
                  "        pm.collectionVariables.set('accessToken', response.accessToken);",
                  "        pm.collectionVariables.set('refreshToken', response.refreshToken);",
                  "        console.log('‚úÖ Patient registered and tokens saved');",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"patient@example.com\",\n  \"password\": \"SecureP@ssw0rd123\",\n  \"fullName\": \"John Doe\"\n}"
            },
            "url": "{{baseUrl}}/auth/register/patient"
          }
        },
        {
          "name": "Register Doctor (Admin Only)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"doctor@hospital.com\",\n  \"password\": \"VerySecureP@ssw0rd123!\",\n  \"fullName\": \"Dr. Jane Smith\",\n  \"specialization\": \"Cardiology\",\n  \"licenseNumber\": \"MH-123456\",\n  \"phone\": \"9876543210\",\n  \"hospitalId\": \"{{hospitalId}}\"\n}"
            },
            "url": "{{baseUrl}}/auth/register/doctor"
          }
        },
        {
          "name": "Register Hospital Admin (Super Admin)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"admin@hospital.com\",\n  \"password\": \"VerySecureP@ssw0rd123!\",\n  \"fullName\": \"Hospital Admin\",\n  \"hospitalId\": \"{{hospitalId}}\"\n}"
            },
            "url": "{{baseUrl}}/auth/register/hospital-admin"
          }
        },
        {
          "name": "Login (Default Admin) ‚≠ê",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('accessToken', response.accessToken);",
                  "    pm.collectionVariables.set('refreshToken', response.refreshToken);",
                  "    console.log('üîê Default Admin Login successful - Tokens saved');",
                  "    console.log('‚úÖ Access Token:', response.accessToken);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"admin@national-health-record-system.com\",\n  \"password\": \"Admin@123456\",\n  \"role\": \"Patient\"\n}"
            },
            "url": "{{baseUrl}}/auth/login",
            "description": "üîê DEFAULT ADMIN LOGIN - Use this to get authorization token!\n\nCredentials from seed script:\n- Email: admin@national-health-record-system.com\n- Password: Admin@123456\n- Role: Patient (seeded as Patient role)\n\n‚ö†Ô∏è Run 'npm run seed' first if database is empty!"
          }
        },
        {
          "name": "Login (Patient)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('accessToken', response.accessToken);",
                  "    pm.collectionVariables.set('refreshToken', response.refreshToken);",
                  "    console.log('üîê Patient Login successful - Tokens saved');",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"patient@example.com\",\n  \"password\": \"SecureP@ssw0rd123\",\n  \"role\": \"Patient\"\n}"
            },
            "url": "{{baseUrl}}/auth/login",
            "description": "Login as Patient. Role must be: Patient, Doctor, HospitalAdmin, or SuperAdmin"
          }
        },
        {
          "name": "Login (Doctor)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('accessToken', response.accessToken);",
                  "    pm.collectionVariables.set('refreshToken', response.refreshToken);",
                  "    console.log('üîê Doctor login successful - Tokens saved');",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"doctor@hospital.com\",\n  \"password\": \"VerySecureP@ssw0rd123!\",\n  \"role\": \"Doctor\"\n}"
            },
            "url": "{{baseUrl}}/auth/login",
            "description": "Login as Doctor"
          }
        },
        {
          "name": "Login (Hospital Admin)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('accessToken', response.accessToken);",
                  "    pm.collectionVariables.set('refreshToken', response.refreshToken);",
                  "    console.log('üîê Hospital Admin login successful - Tokens saved');",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"admin@hospital.com\",\n  \"password\": \"VerySecureP@ssw0rd123!\",\n  \"role\": \"HospitalAdmin\"\n}"
            },
            "url": "{{baseUrl}}/auth/login",
            "description": "Login as Hospital Admin"
          }
        },
        {
          "name": "Login (Super Admin)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('accessToken', response.accessToken);",
                  "    pm.collectionVariables.set('refreshToken', response.refreshToken);",
                  "    console.log('üîê Super Admin login successful - Tokens saved');",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"superadmin@health.gov.in\",\n  \"password\": \"ExtremelySecureP@ssw0rd123!#\",\n  \"role\": \"SuperAdmin\"\n}"
            },
            "url": "{{baseUrl}}/auth/login",
            "description": "Login as Super Admin"
          }
        },
        {
          "name": "Request OTP Login",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"patient@example.com\",\n  \"role\": \"Patient\"\n}"
            },
            "url": "{{baseUrl}}/auth/login/request-otp"
          }
        },
        {
          "name": "Verify OTP Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('accessToken', response.accessToken);",
                  "    pm.collectionVariables.set('refreshToken', response.refreshToken);",
                  "    console.log('üîê OTP verified - Tokens saved');",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"patient@example.com\",\n  \"otp\": \"123456\",\n  \"purpose\": \"Patient\"\n}"
            },
            "url": "{{baseUrl}}/auth/login/verify-otp"
          }
        },
        {
          "name": "Verify Email",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"token\": \"verification-token-string\"\n}"
            },
            "url": "{{baseUrl}}/auth/verify-email"
          }
        },
        {
          "name": "Refresh Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('accessToken', response.accessToken);",
                  "    console.log('üîÑ Access token refreshed');",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refreshToken\": \"{{refreshToken}}\"\n}"
            },
            "url": "{{baseUrl}}/auth/refresh"
          }
        },
        {
          "name": "Forgot Password",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"user@example.com\"\n}"
            },
            "url": "{{baseUrl}}/auth/forgot-password"
          }
        },
        {
          "name": "Reset Password",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"token\": \"reset-token-string\",\n  \"newPassword\": \"NewSecureP@ssw0rd123\"\n}"
            },
            "url": "{{baseUrl}}/auth/reset-password"
          }
        },
        {
          "name": "Logout",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refreshToken\": \"{{refreshToken}}\"\n}"
            },
            "url": "{{baseUrl}}/auth/logout"
          }
        },
        {
          "name": "Get Current User",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/auth/me"
          }
        }
      ]
    },
    {
      "name": "Patients",
      "item": [
        {
          "name": "Create Patient",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response._id) {",
                  "        pm.collectionVariables.set('patientId', response._id);",
                  "        console.log('‚úÖ Patient created:', response._id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"guid\": \"ABCD-1234-EFGH-5678\",\n  \"fullName\": \"Rajesh Kumar\",\n  \"phone\": \"9876543210\",\n  \"gender\": \"Male\",\n  \"dateOfBirth\": \"1990-05-15T00:00:00.000Z\",\n  \"address\": {\n    \"street\": \"123 Main Street\",\n    \"city\": \"Mumbai\",\n    \"state\": \"Maharashtra\",\n    \"pincode\": \"400001\"\n  },\n  \"allergies\": [\"Penicillin\", \"Peanuts\"],\n  \"chronicDiseases\": [\"Diabetes Type 2\", \"Hypertension\"],\n  \"bloodGroup\": \"O+\",\n  \"emergencyContact\": {\n    \"name\": \"Priya Kumar\",\n    \"relationship\": \"Spouse\",\n    \"phone\": \"9876543211\"\n  },\n  \"hasSmartphone\": true,\n  \"idCardIssued\": false\n}"
            },
            "url": "{{baseUrlV1}}/patients"
          }
        },
        {
          "name": "Get All Patients",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrlV1}}/patients?page=1&limit=10",
              "host": ["{{baseUrlV1}}"],
              "path": ["patients"],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number"
                },
                {
                  "key": "limit",
                  "value": "10",
                  "description": "Items per page"
                }
              ]
            }
          }
        },
        {
          "name": "Search Patients",
          "request": {
            "method": "GET",
            "url": "{{baseUrlV1}}/patients/search/Rajesh"
          }
        },
        {
          "name": "Get Patient by GUID",
          "request": {
            "method": "GET",
            "url": "{{baseUrlV1}}/patients/guid/ABCD-1234-EFGH-5678"
          }
        },
        {
          "name": "Get Patient by ID",
          "request": {
            "method": "GET",
            "url": "{{baseUrlV1}}/patients/{{patientId}}"
          }
        },
        {
          "name": "Get Patient ID Card",
          "request": {
            "method": "GET",
            "url": "{{baseUrlV1}}/patients/{{patientId}}/id-card",
            "description": "Returns patient ID card with QR code"
          }
        },
        {
          "name": "Update Patient",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"fullName\": \"Rajesh Kumar Updated\",\n  \"phone\": \"9876543299\",\n  \"address\": {\n    \"street\": \"456 New Street\",\n    \"city\": \"Mumbai\",\n    \"state\": \"Maharashtra\",\n    \"pincode\": \"400002\"\n  }\n}"
            },
            "url": "{{baseUrlV1}}/patients/{{patientId}}"
          }
        },
        {
          "name": "Delete Patient",
          "request": {
            "method": "DELETE",
            "url": "{{baseUrlV1}}/patients/{{patientId}}"
          }
        },
        {
          "name": "Verify Patient GUID (Public)",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "url": "{{baseUrlV1}}/patients/verify/ABCD-1234-EFGH-5678",
            "description": "Public endpoint for QR code verification at hospital kiosks"
          }
        }
      ]
    },
    {
      "name": "Hospitals",
      "item": [
        {
          "name": "Create Hospital",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response._id) {",
                  "        pm.collectionVariables.set('hospitalId', response._id);",
                  "        console.log('‚úÖ Hospital created:', response._id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Gandhi Memorial Hospital\",\n  \"state\": \"Maharashtra\",\n  \"district\": \"Mumbai\",\n  \"hospitalType\": \"Government\",\n  \"isActive\": true\n}"
            },
            "url": "{{baseUrlV1}}/hospitals"
          }
        },
        {
          "name": "Get All Hospitals",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrlV1}}/hospitals?page=1&limit=10",
              "host": ["{{baseUrlV1}}"],
              "path": ["hospitals"],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number"
                },
                {
                  "key": "limit",
                  "value": "10",
                  "description": "Items per page"
                }
              ]
            }
          }
        },
        {
          "name": "Get Hospital by ID",
          "request": {
            "method": "GET",
            "url": "{{baseUrlV1}}/hospitals/{{hospitalId}}"
          }
        },
        {
          "name": "Update Hospital",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Gandhi Memorial Hospital - Updated\",\n  \"isActive\": true\n}"
            },
            "url": "{{baseUrlV1}}/hospitals/{{hospitalId}}"
          }
        },
        {
          "name": "Delete Hospital",
          "request": {
            "method": "DELETE",
            "url": "{{baseUrlV1}}/hospitals/{{hospitalId}}"
          }
        }
      ]
    },
    {
      "name": "Doctors",
      "item": [
        {
          "name": "Create Doctor",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response._id) {",
                  "        pm.collectionVariables.set('doctorId', response._id);",
                  "        console.log('‚úÖ Doctor created:', response._id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"hospitalId\": \"{{hospitalId}}\",\n  \"fullName\": \"Dr. Anjali Sharma\",\n  \"phone\": \"9876543210\",\n  \"specialization\": \"Cardiology\",\n  \"licenseNumber\": \"MH-123456\"\n}"
            },
            "url": "{{baseUrlV1}}/doctors"
          }
        },
        {
          "name": "Get All Doctors",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrlV1}}/doctors?page=1&limit=10",
              "host": ["{{baseUrlV1}}"],
              "path": ["doctors"],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number"
                },
                {
                  "key": "limit",
                  "value": "10",
                  "description": "Items per page"
                }
              ]
            }
          }
        },
        {
          "name": "Get Doctor by ID",
          "request": {
            "method": "GET",
            "url": "{{baseUrlV1}}/doctors/{{doctorId}}"
          }
        },
        {
          "name": "Update Doctor",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"fullName\": \"Dr. Anjali Sharma (Updated)\",\n  \"specialization\": \"Cardiology & Interventional\",\n  \"phone\": \"9876543299\"\n}"
            },
            "url": "{{baseUrlV1}}/doctors/{{doctorId}}"
          }
        },
        {
          "name": "Delete Doctor",
          "request": {
            "method": "DELETE",
            "url": "{{baseUrlV1}}/doctors/{{doctorId}}"
          }
        }
      ]
    },
    {
      "name": "Encounters",
      "item": [
        {
          "name": "Create Encounter",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response._id) {",
                  "        pm.collectionVariables.set('encounterId', response._id);",
                  "        console.log('‚úÖ Encounter created:', response._id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"patientId\": \"ABCD-1234-EFGH-5678\",\n  \"doctorId\": \"{{doctorId}}\",\n  \"hospitalId\": \"{{hospitalId}}\",\n  \"visitReason\": \"Chest pain and breathing difficulty\",\n  \"diagnosis\": \"Acute Myocardial Infarction\",\n  \"prescriptions\": {\n    \"medications\": [\n      {\n        \"name\": \"Aspirin\",\n        \"dosage\": \"75mg\",\n        \"frequency\": \"Once daily\",\n        \"duration\": \"Ongoing\"\n      },\n      {\n        \"name\": \"Atorvastatin\",\n        \"dosage\": \"40mg\",\n        \"frequency\": \"Once daily at night\",\n        \"duration\": \"3 months\"\n      }\n    ],\n    \"instructions\": \"Take medications after meals. Follow up in 2 weeks.\"\n  },\n  \"vitals\": {\n    \"bloodPressure\": \"140/90\",\n    \"heartRate\": 85,\n    \"temperature\": 98.6,\n    \"weight\": 75,\n    \"height\": 170,\n    \"spo2\": 95\n  }\n}"
            },
            "url": "{{baseUrlV1}}/encounters"
          }
        },
        {
          "name": "Get All Encounters",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrlV1}}/encounters?page=1&limit=10",
              "host": ["{{baseUrlV1}}"],
              "path": ["encounters"],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number"
                },
                {
                  "key": "limit",
                  "value": "10",
                  "description": "Items per page"
                }
              ]
            }
          }
        },
        {
          "name": "Get Encounter by ID",
          "request": {
            "method": "GET",
            "url": "{{baseUrlV1}}/encounters/{{encounterId}}"
          }
        },
        {
          "name": "Update Encounter",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"diagnosis\": \"Acute Myocardial Infarction - Stable condition\",\n  \"vitals\": {\n    \"bloodPressure\": \"130/85\",\n    \"heartRate\": 78,\n    \"temperature\": 98.4,\n    \"weight\": 75,\n    \"height\": 170,\n    \"spo2\": 97\n  }\n}"
            },
            "url": "{{baseUrlV1}}/encounters/{{encounterId}}"
          }
        },
        {
          "name": "Delete Encounter",
          "request": {
            "method": "DELETE",
            "url": "{{baseUrlV1}}/encounters/{{encounterId}}"
          }
        }
      ]
    },
    {
      "name": "Health Documents",
      "item": [
        {
          "name": "Create Health Document",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response._id) {",
                  "        pm.collectionVariables.set('documentId', response._id);",
                  "        console.log('‚úÖ Health document created:', response._id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"patientId\": \"ABCD-1234-EFGH-5678\",\n  \"hospitalId\": \"{{hospitalId}}\",\n  \"encounterId\": \"{{encounterId}}\",\n  \"docType\": \"Lab Report\",\n  \"fileUrl\": \"https://s3.amazonaws.com/health-docs/lab-report-123.pdf\",\n  \"metadata\": {\n    \"testName\": \"Complete Blood Count\",\n    \"testDate\": \"2024-01-15\",\n    \"fileSize\": \"256KB\",\n    \"mimeType\": \"application/pdf\"\n  }\n}"
            },
            "url": "{{baseUrl}}/healthdocuments"
          }
        },
        {
          "name": "Get All Health Documents",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/healthdocuments?page=1&limit=10",
              "host": ["{{baseUrlV1}}"],
              "path": ["health-documents"],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number"
                },
                {
                  "key": "limit",
                  "value": "10",
                  "description": "Items per page"
                }
              ]
            }
          }
        },
        {
          "name": "Get Health Document by ID",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/healthdocuments/{{documentId}}"
          }
        },
        {
          "name": "Update Health Document",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"docType\": \"Lab Report - Updated\",\n  \"metadata\": {\n    \"testName\": \"Complete Blood Count (Revised)\",\n    \"testDate\": \"2024-01-15\",\n    \"fileSize\": \"256KB\",\n    \"mimeType\": \"application/pdf\",\n    \"revised\": true\n  }\n}"
            },
            "url": "{{baseUrl}}/healthdocuments/{{documentId}}"
          }
        },
        {
          "name": "Delete Health Document",
          "request": {
            "method": "DELETE",
            "url": "{{baseUrl}}/healthdocuments/{{documentId}}"
          }
        }
      ]
    },
    {
      "name": "Consents",
      "item": [
        {
          "name": "Create Consent",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response._id) {",
                  "        pm.collectionVariables.set('consentId', response._id);",
                  "        console.log('‚úÖ Consent created:', response._id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"patientId\": \"ABCD-1234-EFGH-5678\",\n  \"doctorId\": \"{{doctorId}}\",\n  \"hospitalId\": \"{{hospitalId}}\",\n  \"scope\": [\"view_encounters\", \"view_documents\", \"view_prescriptions\"],\n  \"expiresAt\": \"2024-12-31T23:59:59.999Z\",\n  \"isActive\": true\n}"
            },
            "url": "{{baseUrlV1}}/consents"
          }
        },
        {
          "name": "Get All Consents",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrlV1}}/consents?page=1&limit=10",
              "host": ["{{baseUrlV1}}"],
              "path": ["consents"],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number"
                },
                {
                  "key": "limit",
                  "value": "10",
                  "description": "Items per page"
                }
              ]
            }
          }
        },
        {
          "name": "Get Consent by ID",
          "request": {
            "method": "GET",
            "url": "{{baseUrlV1}}/consents/{{consentId}}"
          }
        },
        {
          "name": "Update Consent",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"scope\": [\"view_encounters\", \"view_documents\", \"view_prescriptions\", \"view_vitals\"],\n  \"expiresAt\": \"2025-06-30T23:59:59.999Z\"\n}"
            },
            "url": "{{baseUrlV1}}/consents/{{consentId}}"
          }
        },
        {
          "name": "Emergency Consent - Request OTP",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"patientId\": \"ABCD-1234-EFGH-5678\",\n  \"doctorId\": \"{{doctorId}}\",\n  \"hospitalId\": \"{{hospitalId}}\",\n  \"emergencyReason\": \"Patient unconscious, immediate access required\"\n}"
            },
            "url": "{{baseUrlV1}}/consents/emergency/request-otp",
            "description": "Request emergency access OTP for critical situations"
          }
        },
        {
          "name": "Emergency Consent - Verify OTP",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"patientId\": \"ABCD-1234-EFGH-5678\",\n  \"doctorId\": \"{{doctorId}}\",\n  \"hospitalId\": \"{{hospitalId}}\",\n  \"otp\": \"123456\"\n}"
            },
            "url": "{{baseUrlV1}}/consents/emergency/verify-otp",
            "description": "Verify emergency OTP and grant temporary access"
          }
        },
        {
          "name": "Emergency Consent - Override",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"patientId\": \"ABCD-1234-EFGH-5678\",\n  \"doctorId\": \"{{doctorId}}\",\n  \"hospitalId\": \"{{hospitalId}}\",\n  \"overrideReason\": \"Life-threatening emergency - patient unconscious\",\n  \"adminApproval\": true\n}"
            },
            "url": "{{baseUrlV1}}/consents/emergency/override",
            "description": "Admin override for emergency access without OTP"
          }
        },
        {
          "name": "Delete Consent",
          "request": {
            "method": "DELETE",
            "url": "{{baseUrlV1}}/consents/{{consentId}}"
          }
        }
      ]
    },
    {
      "name": "Audit Logs",
      "item": [
        {
          "name": "Create Audit Log",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": \"{{doctorId}}\",\n  \"action\": \"VIEW_PATIENT_RECORD\",\n  \"resource\": \"patient\",\n  \"resourceId\": \"ABCD-1234-EFGH-5678\",\n  \"ipAddress\": \"192.168.1.100\",\n  \"details\": {\n    \"userRole\": \"doctor\",\n    \"hospitalId\": \"{{hospitalId}}\",\n    \"consentId\": \"{{consentId}}\",\n    \"accessReason\": \"Regular checkup\"\n  }\n}"
            },
            "url": "{{baseUrl}}/auditlogs",
            "description": "Manual audit log creation (usually automatic)"
          }
        },
        {
          "name": "Get All Audit Logs",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/auditlogs?page=1&limit=10",
              "host": ["{{baseUrlV1}}"],
              "path": ["audit-logs"],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number"
                },
                {
                  "key": "limit",
                  "value": "10",
                  "description": "Items per page"
                }
              ]
            }
          }
        },
        {
          "name": "Get Audit Log by ID",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/auditlogs/{{auditLogId}}"
          }
        },
        {
          "name": "Delete Audit Log",
          "request": {
            "method": "DELETE",
            "url": "{{baseUrl}}/auditlogs/{{auditLogId}}",
            "description": "Super admin only - for cleanup"
          }
        }
      ]
    },
    {
      "name": "Offline Sync",
      "item": [
        {
          "name": "Queue Operation",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": \"{{doctorId}}\",\n  \"deviceId\": \"device-123-abc-456\",\n  \"operation\": \"CREATE\",\n  \"resourceType\": \"encounter\",\n  \"resourceId\": null,\n  \"payload\": {\n    \"patientId\": \"ABCD-1234-EFGH-5678\",\n    \"doctorId\": \"{{doctorId}}\",\n    \"hospitalId\": \"{{hospitalId}}\",\n    \"visitReason\": \"Follow-up consultation\",\n    \"diagnosis\": \"Improving condition\",\n    \"vitals\": {\n      \"bloodPressure\": \"120/80\",\n      \"heartRate\": 72\n    }\n  },\n  \"timestamp\": \"2024-01-20T10:30:00.000Z\",\n  \"version\": 1\n}"
            },
            "url": "{{baseUrlV1}}/sync/queue",
            "description": "Queue operations for offline sync"
          }
        },
        {
          "name": "Get Pending Sync",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrlV1}}/sync/pending?deviceId=device-123-abc-456&userId={{doctorId}}",
              "host": ["{{baseUrlV1}}"],
              "path": ["sync", "pending"],
              "query": [
                {
                  "key": "deviceId",
                  "value": "device-123-abc-456"
                },
                {
                  "key": "userId",
                  "value": "{{doctorId}}"
                }
              ]
            },
            "description": "Get pending operations for sync"
          }
        },
        {
          "name": "Process Sync Queue",
          "request": {
            "method": "POST",
            "url": "{{baseUrlV1}}/sync/process/{{syncQueueId}}",
            "description": "Process a queued operation"
          }
        },
        {
          "name": "Resolve Conflict",
          "request": {
            "method": "PATCH",
            "url": {
              "raw": "{{baseUrlV1}}/sync/resolve/{{syncQueueId}}?resolution=CLIENT_WINS",
              "host": ["{{baseUrlV1}}"],
              "path": ["sync", "resolve", "{{syncQueueId}}"],
              "query": [
                {
                  "key": "resolution",
                  "value": "CLIENT_WINS",
                  "description": "CLIENT_WINS, SERVER_WINS, or MANUAL"
                }
              ]
            },
            "description": "Resolve sync conflicts"
          }
        },
        {
          "name": "Retry Failed Sync",
          "request": {
            "method": "POST",
            "url": {
              "raw": "{{baseUrlV1}}/sync/retry?deviceId=device-123-abc-456&userId={{doctorId}}",
              "host": ["{{baseUrlV1}}"],
              "path": ["sync", "retry"],
              "query": [
                {
                  "key": "deviceId",
                  "value": "device-123-abc-456"
                },
                {
                  "key": "userId",
                  "value": "{{doctorId}}"
                }
              ]
            },
            "description": "Retry all failed operations"
          }
        },
        {
          "name": "Get Sync Stats",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrlV1}}/sync/stats?userId={{doctorId}}",
              "host": ["{{baseUrlV1}}"],
              "path": ["sync", "stats"],
              "query": [
                {
                  "key": "userId",
                  "value": "{{doctorId}}",
                  "description": "Optional user filter"
                }
              ]
            },
            "description": "Get sync statistics (admin only)"
          }
        },
        {
          "name": "Cleanup Old Synced Items",
          "request": {
            "method": "DELETE",
            "url": {
              "raw": "{{baseUrlV1}}/sync/cleanup?days=30",
              "host": ["{{baseUrlV1}}"],
              "path": ["sync", "cleanup"],
              "query": [
                {
                  "key": "days",
                  "value": "30",
                  "description": "Delete items older than N days"
                }
              ]
            },
            "description": "Cleanup old synced items (super admin only)"
          }
        }
      ]
    }
  ]
}
